{% extends 'base.html' %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<title>Porfolio</title>
<link rel="stylesheet" href="../static/portfolio.css">
{% endblock %}

{% block body %}
<div class="card-deck row">
    <div class="card col-md-9" style="margin-left:4rem; margin-right:2rem; margin-top: 2rem;">
            <h5 class="card-title">Portfolio Value</h5>
            <div class="card-body">
                <button id="0" type="button">1 Day</button>
                <button id="1" type="button">1 Week</button>
                <button id="2" type="button">1 Month</button>
                <button id="3" type="button">1 Year</button>
                <canvas id="forecast" width="300" height="150"></canvas>
        </div>
    </div>
    <div class="card col-md-3" style="margin-right:4rem; margin-top: 2rem;">
            <h5><a href="{{url_for('rawdata')}}">Raw Data</a></h5>
            <div>
                <h5>Admin Buttons</h5>
                <ol style="list-style-type:none;">
                    <li>Update</li>
                    <li>Delete</li>
                    <li>Add</li>
                </ol>
            </div>
            <h5>Ratios</h5>
            <p class="card-text">Sharpe Ratio: 107%
                    <div id="portfolio-ch" style="font-size: 1.5rem;color: green;">107%</div>
                </br>Sortino Ratio
            </p>
    </div>
</div>

<div class="card-deck">
    <div class="card col-md-3" style="margin-left: 4rem; margin-top:2rem;">
        <h5 class="card-title">Top Performers</h5>
        <p class="card-text">
            <ul>
                <li></li>
                <li></li>
            </ul>
        </p>
    </div>
    <div class="card col-md-3" style="margin-top:2rem;">
        <h5 class="card-title">Bottom Performers</h5>
        <p class="card-text">
            <ul>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </p>
    </div>
    <div class="card col-md-6" style="margin-right:4rem;margin-top:2rem;">
        <h5 class="card-title">Stats</h5>
        <p class="card-text">
        </p>
    </div>
</div>

<div class="row" style="margin:2rem;">
    <div class="col-sm-6">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Portfolio Breakdown</h5>
                <h5>Top Performers</h5>
                <ul>
                    <li></li>
                </ul>
                <h5>Bottom Performers</h5>
            </div>
        </div>
    </div>
    <div class="col-sm-6">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Stats</h5>
            </div>
        </div>
    </div>
</div>
<script>
    var chart_labels = ['06:00', '09:00', '12:00', '15:00', '18:00', '21:00'];
    var temp_dataset = ['1', '8', '10', '10', '9', '7'];
    var rain_dataset = ['0', '0', '6', '32', '7', '2'];
    var ctx = document.getElementById("forecast").getContext('2d');
    var config = {
        type: 'bar',
        data: {
            labels: chart_labels,
            datasets: [{
                type: 'line',
                label: "Temperature (Celsius)",
                yAxisID: "y-axis-0",
                fill: false,
                data: temp_dataset,
            }, {
                type: 'bar',
                label: "Precipitation (%)",
                yAxisID: "y-axis-1",
                data: rain_dataset,
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    position: "left",
                    "id": "y-axis-0",
                }, {
                    position: "right",
                    "id": "y-axis-1",
                }]
            }
        }
    };
    var forecast_chart = new Chart(ctx, config);
    $("#0").click(function () {
        var data = forecast_chart.config.data;
        data.datasets[0].data = temp_dataset;
        data.datasets[1].data = rain_dataset;
        data.labels = chart_labels;
        forecast_chart.update();
    });
    $("#1").click(function () {
        var chart_labels = ['00:00', '03:00', '06:00', '09:00', '12:00', '15:00', '18:00', '21:00'];
        var temp_dataset = ['5', '3', '4', '8', '10', '11', '10', '9'];
        var rain_dataset = ['0', '0', '1', '4', '19', '19', '7', '2'];
        var data = forecast_chart.config.data;
        data.datasets[0].data = temp_dataset;
        data.datasets[1].data = rain_dataset;
        data.labels = chart_labels;
        forecast_chart.update();
    });
</script>
{% endblock %}